<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Recipe</title>
</head>
<body>
    <form action="/recipes/<%= recipesList.id %>?_method=PUT" method="POST"></form>
    <label for="name">Recipe Name</label>
    <br>
    <input class="edit" type="text" value="<%=recipesList.name%>" name="name"></input>
    <br>
    <label for="image_url">Enter an Image</label>
    <br>
    <input class="edit" type="text" value="<%=recipesList.image_url%>" name="image_url"></input>
    <br>
    <label for="category">category</label>
    <br>
    <input class="edit" type="text" value="<%=recipesList.category%>" name="category"></input>
    <br>
    <label for="instructions">Instructions</label>
    <br>
    <textarea id="textarea" class="edit" name="instructions"><%=recipesList.instructions%></textarea>
    <br>
    <label for="area">Area</label>
    <br>
    <input class="edit" type="text" value="<%=recipesList.area%>" name="area"></input>
    <br>
    <p class="add_field_button">Add Another Ingredient</p>
    <section class="input_fields_wrap">
        
            <% ingrArr.forEach(ingredient =>{ %>
                <div>
                <label for="ingredient">Ingredient</label>
        <br>
        <input class="edit" type="text" value="<%= ingredient.split('+')[1] %>" name="ingredient"></input>
        <br>
        <label for="measure">Measure</label>
        <br>
        <input class="edit" type="text" value="<%= ingredient.split('+')[0] %>" name="measure"></input>
        <br><a href="#" class="remove_field">Remove</a>
        <br>
    </div>
              <% }); %>
     
    </section>
    <br>
    <label for="video_url">video_url</label>
    <br>
    <input class="edit" type="text" value="<%=recipesList.video_url%>" name="video_url"></input>
    <br>
    <button type="submit">Update Recipe</button>
    </form>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
       

     $(document).ready(function() {
	var max_fields      = 30; //maximum input boxes allowed
	var wrapper   		= $(".input_fields_wrap"); //Fields wrapper
	var add_button      = $(".add_field_button"); //Add button ID
	
	var x = 1; //initlal text box count
	$(add_button).click(function(e){ //on add input button click
		e.preventDefault();
		if(x < max_fields){ //max input box allowed
			x++; //text box increment
			$(wrapper).append(`<div><label for="ingredients">Ingredient</label>
            <br>
            <input class="edit" type="text" value="" name="ingredient"></input>
            <br>
            <label for="ingredients">Measure</label>
            <br>
            <input class="edit" type="text" value="" name="measure"></input>
            <br><a href="#" class="remove_field">Remove</a></div>`); //add input box
		}
	});
	
	$(wrapper).on("click",".remove_field", function(e){ //user click on remove text
		e.preventDefault(); $(this).parent('div').remove(); x--;
	})
});
    </script>
</body>
</html>
