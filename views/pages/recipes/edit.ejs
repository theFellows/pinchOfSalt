<!DOCTYPE html>
<html lang="en">
<%- include ('../layouts/head') %>
<body class='lightBg'>
    <%- include('../layouts/header.ejs') %>

    <main id="main">

        <br>
        <form action="/recipes/<%= recipesList.id %>?_method=PUT" method="POST">
            <h2 id="update">Update Your Recipe</h2><br><br>
            <label for="name">Recipe Name</label>
            <br>
            <input class="edit" type="text" value="<%=recipesList.name%>" name="name"></input>
            <br><br>
            <label for="category">Category</label>
            <br>
            <input class="edit" type="text" value="<%=recipesList.category%>" name="category"></input>
            <br><br>
            <label for="area">Origin</label>
            <br>
            <input class="edit" type="text" value="<%=recipesList.area%>" name="area"></input>
            <br><br>
            <label for="instructions">Instructions</label>
            <br>
            <textarea id="textarea" class="edit" name="instructions"><%=recipesList.instructions%></textarea>
            <br><br>
            <label for="image_url">Recipe Image</label>
            <br>
            <input class="edit" type="text" value="<%=recipesList.image_url%>" name="image_url"></input>
            <br><br>
            <label for="video_url">Recipe Video</label>
            <br>
            <input class="edit" type="text" value="<%=recipesList.video_url%>" name="video_url"></input>
            <br><br>

            <p class="add_field_button"><i class="fa fa-plus" style="font-size:20px"></i> Add ingredients</p>
            <br>
            <section class="input_fields_wrap">

                <% ingrArr.forEach(ingredient =>{ %>
                <div>
                    <br>
                    <div> <input id="ingr" class="edit" type="text" value="<%= ingredient.split('+')[0] %>"
                            name="measure"></input>
                        <input id="ingr" class="edit" type="text" value="<%= ingredient.split('+')[1] %>"
                            name="ingredient" placeholder="salt"></input> <a href="#" class="remove_field"><i class="fa fa-trash-o" style="font-size:20px;color:#cf1717"></i></a><br>
                        <br>
                        <br>
                    </div>
                    <% }); %>
            </section>
            <br>
            <button id="add-recipe-button" type="submit">Update Recipe</button>
        </form>
    </main>
    <%- include ('../layouts/footer') %>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        if (localStorage.getItem('token') == undefined) {
            window.location.replace("/registerForm")
        }
    </script>
    <script src="/js/app.js"></script>
</body>

</html>